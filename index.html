<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Phon√©tique fran√ßaise</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Inconsolata:wght@300;400;600&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  :root { --bg:#0e0e12; --surface:#16161e; --border:#2a2a3a; --text:#e8e4d8; --muted:#6a6a7a; }
  body {
    background: var(--bg); color: var(--text);
    font-family: 'Inconsolata', monospace;
    min-height: 100vh; padding: 2rem 1.5rem 4rem;
    background-image:
      radial-gradient(ellipse 60% 40% at 70% 10%, #1a1530 0%, transparent 60%),
      radial-gradient(ellipse 50% 50% at 20% 80%, #0d1a1f 0%, transparent 50%);
  }
  header { text-align: center; margin-bottom: 2rem; }
  header h1 { font-family:'Playfair Display',serif; font-size:clamp(1.8rem,5vw,3rem); color:#c8a96e; letter-spacing:.04em; }
  header p { margin-top:.5rem; color:var(--muted); font-size:.78rem; letter-spacing:.12em; text-transform:uppercase; }

  .legend { display:flex; flex-wrap:wrap; gap:.9rem; margin-bottom:1.6rem; justify-content:center; }
  .legend-item { display:flex; align-items:center; gap:.35rem; font-size:.7rem; color:var(--muted); }
  .dot { width:7px; height:7px; border-radius:50%; }

  .sec-title {
    font-family:'Playfair Display',serif; font-style:italic; font-size:1rem; color:#c8a96e;
    margin:2rem 0 .8rem; padding-left:.6rem; border-left:2px solid #c8a96e;
    display:flex; align-items:center; gap:.6rem;
  }
  .sec-title span { font-family:'Inconsolata',monospace; font-style:normal; font-size:.62rem; color:var(--muted); letter-spacing:.1em; text-transform:uppercase; }

  .grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(130px,1fr)); gap:.5rem; }

  .card {
    background:var(--surface); border:1px solid var(--border); border-radius:6px;
    padding:.75rem .65rem .6rem; user-select:none;
    transition:border-color .15s, box-shadow .15s;
    display:flex; flex-direction:column; align-items:center; gap:.25rem;
    position:relative;
  }
  .card:hover { border-color:var(--col,#c8a96e); box-shadow:0 4px 20px rgba(0,0,0,.5); }

  .ipa { font-family:'Playfair Display',serif; font-size:1.5rem; color:var(--col,#c8a96e); line-height:1; transition:transform .1s; }
  .ipa.pulse { animation:pulse .35s ease-out; }
  .word { font-size:.76rem; color:var(--text); text-align:center; }
  .word b { color:var(--col,#c8a96e); font-weight:700; }
  .type { font-size:.55rem; text-transform:uppercase; letter-spacing:.07em; color:var(--muted); text-align:center; }

  /* Two-button row */
  .btn-row { display:flex; gap:.3rem; margin-top:.35rem; width:100%; }
  .btn {
    flex:1; border:1px solid var(--border); border-radius:4px;
    background:transparent; color:var(--muted);
    font-family:'Inconsolata',monospace; font-size:.65rem;
    padding:.3rem .15rem; cursor:pointer;
    transition:background .15s, border-color .15s, color .15s, transform .1s;
    display:flex; align-items:center; justify-content:center; gap:.2rem;
    white-space:nowrap;
  }
  .btn:hover {
    border-color:var(--col,#c8a96e);
    color:var(--col,#c8a96e);
    background:color-mix(in srgb,var(--col,#c8a96e) 8%,transparent);
  }
  .btn.active {
    background:color-mix(in srgb,var(--col,#c8a96e) 18%,transparent);
    border-color:var(--col,#c8a96e);
    color:var(--col,#c8a96e);
    transform:scale(.94);
  }

  @keyframes pulse { 0%{transform:scale(1)} 40%{transform:scale(1.15)} 100%{transform:scale(1)} }

  .footer { text-align:center; margin-top:2.5rem; color:var(--muted); font-size:.68rem; line-height:1.9; }
  .footer a { color:#7eb8c9; text-decoration:none; }
</style>
</head>
<body>

<header>
  <h1>Phon√©tique fran√ßaise</h1>
  <p>Son isol√© ¬∑ Mot exemple</p>
</header>

<div class="legend">
  <div class="legend-item"><div class="dot" style="background:#c8a96e"></div>Voyelles orales</div>
  <div class="legend-item"><div class="dot" style="background:#7eb8c9"></div>Voyelles nasales</div>
  <div class="legend-item"><div class="dot" style="background:#7ec9a0"></div>Semi-voyelles</div>
  <div class="legend-item"><div class="dot" style="background:#b87ec9"></div>Consonnes</div>
</div>

<div id="app"></div>

<p class="footer">
  üîä Son isol√© : <a href="https://en.wikipedia.org/wiki/Help:IPA" target="_blank">Wikipedia Help:IPA</a> ¬∑ Wikimedia Commons (CC)<br>
  üìñ Mot exemple : synth√®se vocale du navigateur (fr-FR)
</p>

<script>
const W  = 'https://upload.wikimedia.org/wikipedia/commons';
const WT = 'https://upload.wikimedia.org/wikipedia/commons/transcoded';

function au(hash, filename) {
  const ext = filename.split('.').pop().toLowerCase();
  if (ext === 'wav') return `${W}/${hash}/${filename}`;
  return `${WT}/${hash}/${filename}/${filename}.mp3`;
}

// wordText = plain word for TTS (no HTML tags)
const SECTIONS = [
  {
    label: 'Voyelles orales', sub: '12 sons',
    cards: [
      { ipa:'i',  word:'v<b>ie</b>',    wordText:'vie',    type:'ferm√©e ant√©rieure',      col:'#c8a96e', url:au('9/91','Close_front_unrounded_vowel.ogg') },
      { ipa:'e',  word:'<b>√©</b>t√©',    wordText:'√©t√©',    type:'mi-ferm√©e ant√©rieure',   col:'#c8a96e', url:au('6/6c','Close-mid_front_unrounded_vowel.ogg') },
      { ipa:'…õ',  word:'f<b>√™</b>te',   wordText:'f√™te',   type:'mi-ouverte ant√©rieure',  col:'#c8a96e', url:au('7/71','Open-mid_front_unrounded_vowel.ogg') },
      { ipa:'a',  word:'p<b>a</b>tte',  wordText:'patte',  type:'ouverte ant√©rieure',     col:'#c8a96e', url:au('6/65','Open_front_unrounded_vowel.ogg') },
      { ipa:'…ë',  word:'p<b>√¢</b>te',   wordText:'p√¢te',   type:'ouverte post√©rieure',    col:'#c8a96e', url:au('e/e5','Open_back_unrounded_vowel.ogg') },
      { ipa:'…î',  word:'<b>o</b>r',     wordText:'or',     type:'mi-ouverte post√©rieure', col:'#c8a96e', url:au('0/02','Open-mid_back_rounded_vowel.ogg') },
      { ipa:'o',  word:'b<b>eau</b>',   wordText:'beau',   type:'mi-ferm√©e post√©rieure',  col:'#c8a96e', url:au('8/84','Close-mid_back_rounded_vowel.ogg') },
      { ipa:'u',  word:'r<b>ou</b>e',   wordText:'roue',   type:'ferm√©e post√©rieure',     col:'#c8a96e', url:au('5/5d','Close_back_rounded_vowel.ogg') },
      { ipa:'y',  word:'l<b>u</b>ne',   wordText:'lune',   type:'ferm√©e ant. arrondie',   col:'#c8a96e', url:au('e/ea','Close_front_rounded_vowel.ogg') },
      { ipa:'√∏',  word:'f<b>eu</b>',    wordText:'feu',    type:'mi-ferm√©e arrondie',     col:'#c8a96e', url:au('5/53','Close-mid_front_rounded_vowel.ogg') },
      { ipa:'≈ì',  word:'p<b>eu</b>r',   wordText:'peur',   type:'mi-ouverte arrondie',    col:'#c8a96e', url:au('0/00','Open-mid_front_rounded_vowel.ogg') },
      { ipa:'…ô',  word:'l<b>e</b>',     wordText:'le',     type:'schwa',                  col:'#c8a96e', url:au('d/d9','Mid-central_vowel.ogg') },
    ]
  },
  {
    label: 'Voyelles nasales', sub: '4 sons',
    cards: [
      { ipa:'…ëÃÉ', word:'v<b>en</b>t',   wordText:'vent',   type:'nasale centrale',        col:'#7eb8c9', url:au('0/0e','Fr-en.ogg') },
      { ipa:'…õÃÉ', word:'v<b>in</b>',    wordText:'vin',    type:'nasale ant√©rieure',      col:'#7eb8c9', url:'https://upload.wikimedia.org/wikipedia/commons/transcoded/6/6a/Fr-Un-fr_FR-Paris.ogg/Fr-Un-fr_FR-Paris.ogg.mp3' },
      { ipa:'≈ìÃÉ', word:'br<b>un</b>',   wordText:'brun',   type:'nasale ant. arrondie',   col:'#7eb8c9', url:'https://upload.wikimedia.org/wikipedia/commons/transcoded/3/3a/Fr-un-fr_BE.ogg/Fr-un-fr_BE.ogg.mp3' },
      { ipa:'…îÃÉ', word:'b<b>on</b>',    wordText:'bon',    type:'nasale post√©rieure',     col:'#7eb8c9', url:au('3/38','Fr-on.ogg') },
    ]
  },
  {
    label: 'Semi-voyelles', sub: '3 sons',
    cards: [
      { ipa:'j',  word:'<b>y</b>eux',   wordText:'yeux',   type:'palatale',               col:'#7ec9a0', url:au('e/e8','Palatal_approximant.ogg') },
      { ipa:'w',  word:'<b>ou</b>i',    wordText:'oui',    type:'labio-v√©laire',          col:'#7ec9a0', url:au('f/f2','Voiced_labio-velar_approximant.ogg') },
      { ipa:'…•',  word:'n<b>ui</b>t',   wordText:'nuit',   type:'labio-palatale',         col:'#7ec9a0', url:`${W}/3/32/LL-Q150_(fra)-WikiLucas00-IPA_\u0265.wav` },
    ]
  },
  {
    label: 'Consonnes', sub: '17 sons',
    cards: [
      { ipa:'p',  word:'<b>p</b>√®re',   wordText:'p√®re',   type:'bilabiale sourde',       col:'#b87ec9', url:au('5/51','Voiceless_bilabial_plosive.ogg') },
      { ipa:'b',  word:'<b>b</b>eau',   wordText:'beau',   type:'bilabiale vois√©e',       col:'#b87ec9', url:au('2/2c','Voiced_bilabial_plosive.ogg') },
      { ipa:'t',  word:'<b>t</b>√™te',   wordText:'t√™te',   type:'dentale sourde',         col:'#b87ec9', url:au('0/02','Voiceless_alveolar_plosive.ogg') },
      { ipa:'d',  word:'<b>d</b>ire',   wordText:'dire',    type:'dentale vois√©e',         col:'#b87ec9', url:au('0/01','Voiced_alveolar_plosive.ogg') },
      { ipa:'k',  word:'<b>c</b>as',    wordText:'cas',    type:'v√©laire sourde',         col:'#b87ec9', url:au('e/e3','Voiceless_velar_plosive.ogg') },
      { ipa:'g',  word:'<b>g</b>are',   wordText:'gare',   type:'v√©laire vois√©e',         col:'#b87ec9', url:au('b/b4','Voiced_velar_plosive.ogg') },
      { ipa:'f',  word:'<b>f</b>eu',    wordText:'feu',    type:'labio-dentale sourde',   col:'#b87ec9', url:au('3/33','Voiceless_labiodental_fricative.ogg') },
      { ipa:'v',  word:'<b>v</b>in',    wordText:'vin',    type:'labio-dentale vois√©e',   col:'#b87ec9', url:au('8/85','Voiced_labiodental_fricative.ogg') },
      { ipa:'s',  word:'<b>s</b>ol',    wordText:'sol',    type:'sibilante sourde',       col:'#b87ec9', url:au('a/ac','Voiceless_alveolar_sibilant.ogg') },
      { ipa:'z',  word:'<b>z</b>√©ro',   wordText:'z√©ro',   type:'sibilante vois√©e',       col:'#b87ec9', url:au('c/c0','Voiced_alveolar_sibilant.ogg') },
      { ipa:' É',  word:'<b>ch</b>at',   wordText:'chat',   type:'palatale sourde',        col:'#b87ec9', url:au('c/cc','Voiceless_palato-alveolar_sibilant.ogg') },
      { ipa:' í',  word:'<b>j</b>our',   wordText:'jour',   type:'palatale vois√©e',        col:'#b87ec9', url:au('3/30','Voiced_palato-alveolar_sibilant.ogg') },
      { ipa:'m',  word:'<b>m</b>er',    wordText:'mer',    type:'nasale bilabiale',       col:'#b87ec9', url:au('a/a9','Bilabial_nasal.ogg') },
      { ipa:'n',  word:'<b>n</b>ez',    wordText:'nez',    type:'nasale dentale',         col:'#b87ec9', url:au('2/29','Alveolar_nasal.ogg') },
      { ipa:'…≤',  word:'a<b>gn</b>eau', wordText:'agneau', type:'nasale palatale',        col:'#b87ec9', url:au('4/46','Palatal_nasal.ogg') },
      { ipa:'l',  word:'<b>l</b>une',   wordText:'lune',   type:'lat√©rale dentale',       col:'#b87ec9', url:au('b/bc','Alveolar_lateral_approximant.ogg') },
      { ipa:' Å',  word:'<b>r</b>ue',    wordText:'rue',    type:'fricative uvulaire',     col:'#b87ec9', url:au('a/af','Voiced_uvular_fricative.ogg') },
    ]
  },
];

// ‚îÄ‚îÄ‚îÄ TTS setup ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const synth = window.speechSynthesis;
let frVoice = null;
function loadVoice() {
  const vs = synth.getVoices();
  frVoice = vs.find(v => v.lang === 'fr-FR') || vs.find(v => v.lang.startsWith('fr')) || null;
}
synth.onvoiceschanged = loadVoice;
loadVoice();

function speakWord(text) {
  synth.cancel();
  const utt = new SpeechSynthesisUtterance(text);
  utt.lang = 'fr-FR';
  utt.rate = 0.85;
  if (frVoice) utt.voice = frVoice;
  synth.speak(utt);
}

// ‚îÄ‚îÄ‚îÄ Render ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const app = document.getElementById('app');

SECTIONS.forEach(({ label, sub, cards }) => {
  const h = document.createElement('div');
  h.className = 'sec-title';
  h.innerHTML = `${label} <span>${sub}</span>`;
  app.appendChild(h);

  const grid = document.createElement('div');
  grid.className = 'grid';
  app.appendChild(grid);

  cards.forEach(({ ipa, word, wordText, type, col, url }) => {
    const el = document.createElement('div');
    el.className = 'card';
    el.style.setProperty('--col', col);
    el.innerHTML = `
      <div class="ipa">[${ipa}]</div>
      <div class="word">${word}</div>
      <div class="type">${type}</div>
      <div class="btn-row">
        <button class="btn btn-sound" title="Son isol√©">üîä Son</button>
        <button class="btn btn-word"  title="Mot exemple">üìñ Mot</button>
      </div>
    `;

    const ipaEl   = el.querySelector('.ipa');
    const btnSound = el.querySelector('.btn-sound');
    const btnWord  = el.querySelector('.btn-word');

    // Animate IPA symbol briefly
    function pulseIpa() {
      ipaEl.classList.remove('pulse');
      void ipaEl.offsetWidth; // reflow
      ipaEl.classList.add('pulse');
      ipaEl.addEventListener('animationend', () => ipaEl.classList.remove('pulse'), { once: true });
    }

    // üîä Isolated sound (Wikimedia audio)
    let playing = null;
    btnSound.addEventListener('click', (e) => {
      e.stopPropagation();
      if (playing) { playing.pause(); playing.currentTime = 0; }
      btnSound.classList.add('active');
      pulseIpa();
      playing = new Audio(url);
      playing.play().catch(console.warn);
      playing.addEventListener('ended', () => btnSound.classList.remove('active'));
      playing.addEventListener('error', () => btnSound.classList.remove('active'));
    });

    // üìñ Word example (TTS)
    btnWord.addEventListener('click', (e) => {
      e.stopPropagation();
      if (playing) { playing.pause(); playing.currentTime = 0; btnSound.classList.remove('active'); }
      btnWord.classList.add('active');
      pulseIpa();
      speakWord(wordText);
      // TTS has no reliable "ended" event; remove active after estimated duration
      setTimeout(() => btnWord.classList.remove('active'), wordText.length * 120 + 400);
    });

    grid.appendChild(el);
  });
});
</script>
</body>
</html>
